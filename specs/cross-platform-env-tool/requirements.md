# 要件定義書

## 概要

クロスプラットフォーム（Windows、macOS、Linux）で動作する環境情報取得ツールです。システムのハードウェア情報、OS詳細、インストール済みソフトウェアのバージョン情報を収集し、構造化された形式で出力します。最終的にはPythonライブラリとして配布可能な形にします。

## 要件

### 要件1

**ユーザーストーリー:** システム管理者として、複数のプラットフォームで統一された方法でシステム情報を取得したい。そうすることで、環境の違いを意識せずに情報収集を自動化できる。

#### 受入基準

1. WHEN ユーザーがWindows、macOS、またはLinux上でツールを実行する THEN システムは適切なプラットフォーム固有のコマンドを使用して情報を取得する SHALL
2. WHEN ツールが実行される THEN システムはプラットフォームを自動検出し、適切な情報収集方法を選択する SHALL
3. WHEN 情報収集が完了する THEN システムは統一されたフォーマットで結果を出力する SHALL

### 要件2

**ユーザーストーリー:** 開発者として、ハードウェア情報（CPU、RAM、GPU）を取得したい。そうすることで、システムの性能特性を把握できる。

#### 受入基準

1. WHEN ハードウェア情報が要求される THEN システムはCPUの詳細情報（名前、コア数、周波数）を取得する SHALL
2. WHEN ハードウェア情報が要求される THEN システムはRAMの総容量と使用可能容量を取得する SHALL
3. WHEN ハードウェア情報が要求される THEN システムはGPU情報（名前、メモリ容量）を取得する SHALL
4. IF GPU情報が取得できない場合 THEN システムは適切なエラーメッセージまたは「不明」を表示する SHALL

### 要件3

**ユーザーストーリー:** システム管理者として、OS情報を詳細に取得したい。そうすることで、システムの構成とバージョン管理ができる。

#### 受入基準

1. WHEN OS情報が要求される THEN システムはOSの名前とバージョンを取得する SHALL
2. WHEN OS情報が要求される THEN システムはOSのエディション情報（Pro、Home等）を取得する SHALL
3. WHEN OS情報が要求される THEN システムはビルド番号またはカーネルバージョンを取得する SHALL
4. WHEN OS情報が要求される THEN システムはアーキテクチャ情報（x64、ARM等）を取得する SHALL

### 要件4

**ユーザーストーリー:** 開発者として、インストール済みソフトウェアのバージョン情報を取得したい。そうすることで、開発環境の依存関係を確認できる。

#### 受入基準

1. WHEN ソフトウェア情報が要求される THEN システムは設定可能なソフトウェアリストのバージョンを取得する SHALL
2. WHEN ソフトウェアが見つからない場合 THEN システムは「未インストール」または適切なメッセージを表示する SHALL
3. WHEN カスタム設定ファイルが存在する THEN システムはそのファイルからソフトウェアリストを読み込む SHALL
4. WHEN デフォルト設定が使用される THEN システムは一般的なソフトウェア（Python、Git、Node.js等）をチェックする SHALL

### 要件5

**ユーザーストーリー:** ユーザーとして、コマンドライン引数で出力内容を制御したい。そうすることで、必要な情報のみを効率的に取得できる。

#### 受入基準

1. WHEN 引数なしで実行される THEN システムは全ての情報（ハードウェア、OS、ソフトウェア）を出力する SHALL
2. WHEN --hardwareフラグが指定される THEN システムはハードウェア情報のみを出力する SHALL
3. WHEN --osフラグが指定される THEN システムはOS情報のみを出力する SHALL
4. WHEN --softwareフラグが指定される THEN システムはソフトウェア情報のみを出力する SHALL
5. WHEN 複数のフラグが指定される THEN システムは指定された全ての情報を出力する SHALL

### 要件6

**ユーザーストーリー:** セキュリティ担当者として、コマンドインジェクション攻撃を防ぎたい。そうすることで、システムの安全性を確保できる。

#### 受入基準

1. WHEN 外部コマンドを実行する THEN システムは入力値のサニタイゼーションを行う SHALL
2. WHEN 設定ファイルからコマンドを読み込む THEN システムは許可されたコマンドパターンのみを実行する SHALL
3. WHEN ユーザー入力を処理する THEN システムはシェルメタ文字をエスケープまたは除去する SHALL
4. WHEN コマンド実行でエラーが発生する THEN システムは詳細なエラー情報を外部に漏らさない SHALL

### 要件7

**ユーザーストーリー:** 開発者として、このツールをPythonライブラリとして使用したい。そうすることで、他のPythonアプリケーションに組み込むことができる。

#### 受入基準

1. WHEN ライブラリとしてインポートされる THEN システムは各機能を個別の関数として提供する SHALL
2. WHEN ライブラリ関数が呼び出される THEN システムは構造化されたデータ（辞書またはオブジェクト）を返す SHALL
3. WHEN ライブラリがインストールされる THEN システムはpipを使用してインストール可能である SHALL
4. WHEN ライブラリが使用される THEN システムは適切なエラーハンドリングと例外処理を提供する SHALL

### 要件8

**ユーザーストーリー:** ユーザーとして、設定可能なソフトウェアチェックリストを持ちたい。そうすることで、環境固有のソフトウェアも監視できる。

#### 受入基準

1. WHEN config.jsonファイルが存在する THEN システムはそのファイルからソフトウェア定義を読み込む SHALL
2. WHEN 設定ファイルが無効な形式である THEN システムは適切なエラーメッセージを表示してデフォルト設定を使用する SHALL
3. WHEN カスタムソフトウェアが定義される THEN システムは指定されたコマンドを安全に実行する SHALL
4. WHEN 設定ファイルが存在しない THEN システムはデフォルトのソフトウェアリストを使用する SHALL